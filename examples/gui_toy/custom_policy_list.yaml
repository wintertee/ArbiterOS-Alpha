# Custom Policy List
# This file contains policies defined by developers.
# Developers can add new policies here to extend or customize governance.
# Custom policies are loaded after kernel policies and both are applied.
#
# NOTE: Policy checkers and graph structure checkers should be defined in
# kernel_policy_list.yaml (kernel policies). Only policy routers should be
# defined here as custom policies. For more complex custom policies, use
# custom_policy.py instead.

# Policy routers dynamically route execution flow based on conditions
policy_routers:
  # Example: Route back to reason node when confidence is low (for GUI example)
  - type: MetricThresholdPolicyRouter
    name: revisit_reason_when_low_confidence
    key: confidence
    threshold: 0.7
    target: reason
  
  # Example from toy.py: If confidence is low, regenerate the response
  - type: MetricThresholdPolicyRouter
    name: regenerate_on_low_confidence
    key: confidence
    threshold: 0.6
    target: generate

  # GUI-specific guardrails derived from recent failure analysis
  - type: MetricThresholdPolicyRouter
    name: enforce_replan_on_low_plan_confidence
    key: plan_confidence
    threshold: 0.65
    target: plan

  - type: MetricThresholdPolicyRouter
    name: wait_for_gui_ready
    key: gui_ready_score
    threshold: 0.75
    target: perceive

  - type: MetricThresholdPolicyRouter
    name: re_reason_on_context_drift
    key: reason_consistency
    threshold: 0.7
    target: reason

  - type: MetricThresholdPolicyRouter
    name: reobserve_when_execution_alignment_low
    key: execution_alignment
    threshold: 0.8
    target: perceive

